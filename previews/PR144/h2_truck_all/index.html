<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Hydrogen Truck All · DOLPHYN</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">DOLPHYN</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Welcome Page</a></li><li><a class="tocitem" href="../solvers/">Solvers</a></li><li><a class="tocitem" href="../model_introduction/">Model Introduction</a></li><li><span class="tocitem">Model Inputs/Outputs Documentation</span><ul><li><a class="tocitem" href="../global_data_documentation/">General Database Documentation</a></li><li><a class="tocitem" href="../genx_data_documentation/">GenX Database Documentation</a></li><li><a class="tocitem" href="../hsc_data_documentation/">HSC Database Documentation</a></li></ul></li><li><a class="tocitem" href="../objective_function/">Objective Function</a></li><li><span class="tocitem">GenX</span><ul><li><a class="tocitem" href="../load_inputs/">GenX Inputs Functions</a></li><li><a class="tocitem" href="../write_outputs/">GenX Outputs Functions</a></li><li><a class="tocitem" href="../genx_notation/">GenX Notation</a></li><li><a class="tocitem" href="../power_balance/">Power Balance</a></li><li><input class="collapse-toggle" id="menuitem-6-5" type="checkbox"/><label class="tocitem" for="menuitem-6-5"><span class="docs-label">GenX Function Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../core/">Core</a></li><li><input class="collapse-toggle" id="menuitem-6-5-2" type="checkbox"/><label class="tocitem" for="menuitem-6-5-2"><span class="docs-label">Resources</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../curtailable_variable_renewable/">Curtailable Variable Renewable</a></li><li><a class="tocitem" href="../flexible_demand/">Flexible Demand</a></li><li><a class="tocitem" href="../hydro_res/">Hydro</a></li><li><a class="tocitem" href="../must_run/">Must Run</a></li><li><a class="tocitem" href="../storage/">Storage</a></li><li><a class="tocitem" href="../investment_charge/">Investment Charge</a></li><li><a class="tocitem" href="../investment_energy/">Investment Energy</a></li><li><a class="tocitem" href="../long_duration_storage/">Long Duration Storage</a></li><li><a class="tocitem" href="../storage_all/">Storage All</a></li><li><a class="tocitem" href="../storage_asymmetric/">Storage Asymmetric</a></li><li><a class="tocitem" href="../storage_symmetric/">Storage Symmetric</a></li><li><a class="tocitem" href="../thermal/">Thermal</a></li><li><a class="tocitem" href="../thermal_commit/">Thermal Commit</a></li><li><a class="tocitem" href="../thermal_no_commit/">Thermal No Commit</a></li></ul></li><li><a class="tocitem" href="../policies/">Policies</a></li></ul></li></ul></li><li><span class="tocitem">HSC</span><ul><li><a class="tocitem" href="../load_h2_inputs/">HSC Inputs Functions</a></li><li><a class="tocitem" href="../write_h2_outputs/">HSC Outputs Functions</a></li><li><a class="tocitem" href="../hsc_notation/">Hydrogen Notation</a></li><li><a class="tocitem" href="../h2_balance/">HSC Supply-Demand Balance</a></li><li><input class="collapse-toggle" id="menuitem-7-5" type="checkbox" checked/><label class="tocitem" for="menuitem-7-5"><span class="docs-label">HSC Function Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../h2_core/">Hydrogen Core</a></li><li><a class="tocitem" href="../h2_flexible_demand/">Hydrogen Flexible Demand</a></li><li><a class="tocitem" href="../g2p/">Hydrogen to Power</a></li><li><input class="collapse-toggle" id="menuitem-7-5-4" type="checkbox"/><label class="tocitem" for="menuitem-7-5-4"><span class="docs-label">Hydrogen Storage</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../h2_long_duration_storage/">Hydrogen Long Duration Storage</a></li><li><a class="tocitem" href="../h2_storage_all/">Hydrogen Storage ALL</a></li><li><a class="tocitem" href="../h2_storage_investment/">Hydrogen Storage Investment</a></li><li><a class="tocitem" href="../h2_storage/">Hydrogen Storage</a></li></ul></li><li><a class="tocitem" href="../h2_transmission/">Hydrogen Transimission</a></li><li><input class="collapse-toggle" id="menuitem-7-5-6" type="checkbox" checked/><label class="tocitem" for="menuitem-7-5-6"><span class="docs-label">Hydrogen Truck</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../h2_long_duration_truck/">Hydrogen Long Duration Truck</a></li><li class="is-active"><a class="tocitem" href>Hydrogen Truck All</a></li><li><a class="tocitem" href="../h2_truck_investment/">Hydrogen Truck Investment</a></li><li><a class="tocitem" href="../h2_truck/">Hydrogen Truck</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7-5-7" type="checkbox"/><label class="tocitem" for="menuitem-7-5-7"><span class="docs-label">Hydrogen Production</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../h2_production_all/">Hydrogen Production All</a></li><li><a class="tocitem" href="../h2_production_commit/">Hydrogen Production Commit</a></li><li><a class="tocitem" href="../h2_production_no_commit/">Hydrogen Production No Commit</a></li><li><a class="tocitem" href="../h2_production/">Hydrogen Production</a></li></ul></li></ul></li></ul></li><li><a class="tocitem" href="../additional_tools/">Additional Tools</a></li><li><a class="tocitem" href="../solve_model/">Solving the Model</a></li><li><a class="tocitem" href="../methods/">Methods</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">HSC</a></li><li><a class="is-disabled">HSC Function Reference</a></li><li><a class="is-disabled">Hydrogen Truck</a></li><li class="is-active"><a href>Hydrogen Truck All</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Hydrogen Truck All</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/macroenergy/DOLPHYN/blob/main/docs/src/h2_truck_all.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Hydrogen-Truck-All"><a class="docs-heading-anchor" href="#Hydrogen-Truck-All">Hydrogen Truck All</a><a id="Hydrogen-Truck-All-1"></a><a class="docs-heading-anchor-permalink" href="#Hydrogen-Truck-All" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="DOLPHYN.h2_truck_all-Tuple{JuMP.Model, Dict, Dict}" href="#DOLPHYN.h2_truck_all-Tuple{JuMP.Model, Dict, Dict}"><code>DOLPHYN.h2_truck_all</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">h2_truck_all(EP::Model, inputs::Dict, setup::Dict)</code></pre><p>This function defines a series of operating variables, expressions and constraints in truck scheduling and routing model. We establish the truck scheduling model by modeling the change of truck&#39;s states and number. In each zone <span>$z$</span>, we have available trucks either in full or empty states which are ready for unloading or loading. In addition, we have trucks in transit states which are either in full or empty states. Further the transit states are divided into three categories: departed, arrived and in-transit. The departed trucks are trucks that have already loaded energy carrier such as hydrogen in the origin zone; the arrived trucks are trucks that have already unloaded energy carrier in the destination zone; and the in-transit trucks are trucks that are in transit on a certain defined route. The truck state will shift from loaded to departed after the truck loading time, and samely, the truck state will shift from unloaded to arrived after the truck unloading time. Detailed truck model description is available in the <a href="https://ieeexplore.ieee.org/abstract/document/9371425">G. He, D. S. Mallapragada 2021</a>.</p><p><img src="../assets/truck_schematic.png" alt="Truck scheduling model"/> <em>Figure. Truck scheduling model</em></p><p><strong><strong>Variables</strong></strong></p><table><tr><th style="text-align: right">Variable</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><span>$v_{j, t}^{\textrm{F}}$</span></td><td style="text-align: right">Number of full trucks of type <span>$j$</span> at time <span>$t$</span></td></tr><tr><td style="text-align: right"><span>$v_{j, t}^{\textrm{E}}$</span></td><td style="text-align: right">Number of empty trucks of type <span>$j$</span> at time <span>$t$</span></td></tr><tr><td style="text-align: right"><span>$V_{j}$</span></td><td style="text-align: right">Total number of trucks including full and empty of type <span>$j$</span></td></tr><tr><td style="text-align: right"><span>$q_{z, j, t}^{\textrm{F}}$</span></td><td style="text-align: right">Number of available full trucks of type <span>$j$</span> at zone &#39;z&#39; at time <span>$t$</span></td></tr><tr><td style="text-align: right"><span>$q_{z, j, t}^{\textrm{E}}$</span></td><td style="text-align: right">Number of available empty trucks of type <span>$j$</span> at zone &#39;z&#39; at time <span>$t$</span></td></tr><tr><td style="text-align: right"><span>$u_{r, d, j, t}^{\textrm{F}}$</span></td><td style="text-align: right">Number of full trucks in transit on route &#39;r&#39; with direction &#39;d&#39; of type <span>$j$</span> at time <span>$t$</span></td></tr><tr><td style="text-align: right"><span>$u_{r, d, j, t}^{\textrm{E}}$</span></td><td style="text-align: right">Number of empty trucks in transit on route &#39;r&#39; with direction &#39;d&#39; of type <span>$j$</span> at time <span>$t$</span></td></tr><tr><td style="text-align: right"><span>$x_{r, d, j, t-1}^{\textrm{F}}$</span></td><td style="text-align: right">Number of departed full trucks in transit on route &#39;r&#39; with direction &#39;d&#39; of type <span>$j$</span> at time <span>$t$</span></td></tr><tr><td style="text-align: right"><span>$x_{r, d, j, t-1}^{\textrm{E}}$</span></td><td style="text-align: right">Number of departed empty trucks in transit on route &#39;r&#39; with direction &#39;d&#39; of type <span>$j$</span> at time <span>$t$</span></td></tr><tr><td style="text-align: right"><span>$y_{r, d, j, t-1}^{\textrm{F}}$</span></td><td style="text-align: right">Number of arrived full trucks in transit on route &#39;r&#39; with direction &#39;d&#39; of type <span>$j$</span> at time <span>$t$</span></td></tr><tr><td style="text-align: right"><span>$y_{r, d, j, t-1}^{\textrm{E}}$</span></td><td style="text-align: right">Number of arrived empty trucks in transit on route &#39;r&#39; with direction &#39;d&#39; of type <span>$j$</span> at time <span>$t$</span></td></tr></table><p><strong><strong>Constraints</strong></strong></p><p>The sum of full and empty trucks should equal to the total number of invested trucks.</p><p class="math-container">\[\begin{equation*}
    v_{j, t}^{\textrm{F}}+v_{j, t}^{\textrm{E}}=V_{j} \quad \forall j \in \mathbb{J}, t \in \mathbb{T}
\end{equation*}\]</p><p>The full (empty) trucks include full (empty) trucks in transit and staying at each zones.</p><p class="math-container">\[\begin{aligned}
    v_{j, t}^{\textrm{F}}=\sum_{r \in \mathfrak{R}, d \in [-1,1]} u_{r, d, j, t}^{\textrm{F}}+\sum_{z \in \mathbb{Z}} q_{z, j, t}^{\textrm{F}} \\
    v_{j, t}^{\textrm{E}}=\sum_{r \in \mathfrak{R}, d \in [-1,1]} u_{r, d, j, t}^{\textrm{E}}+\sum_{z \in \mathbb{Z}} q_{z, j, t}^{\textrm{E}} \quad \forall j \in \mathbb{J}, t \in \mathbb{T}
\end{aligned}\]</p><p>The change of the total number of full (empty) available trucks at zone <span>$z$</span> should equal the number of charged (discharged) trucks minus the number of discharged (charged) trucks at zone <span>$z$</span> plus the number of full (empty) trucks that just arrived minus the number of full (empty) trucks that just departed:</p><p class="math-container">\[\begin{aligned}
    q_{z, j, t}^{\textrm{F}}-q_{z, j, t-1}^{\textrm{F}}=&amp; q_{z, j, t}^{\textrm{CHA}}-q_{z, j, t}^{\textrm{DIS}} \\
    &amp;+\sum_{(r,d)\in \{((z,z^{\prime}),-1), ((z^{\prime},z),1) \,\forall\, z^{\prime} \in \mathbb{Z}\}}\left(-x_{r, d, j, t-1}^{\textrm{F}}+y_{r, d, j, t-1}^{\textrm{F}}\right) \\
    q_{z, j, t}^{\textrm{E}}-q_{z, j, t-1}^{\textrm{E}}=&amp;-q_{z, j, t}^{\textrm{CHA}}+q_{z, j, t}^{\textrm{DIS}} \\
    &amp;+\sum_{(r,d) \in \{((z,z^{\prime}),-1), ((z^{\prime},z),1) \,\forall\, z^{\prime} \in \mathbb{Z}\}}\left(-x_{r, d, j, t-1}^{\textrm{E}}+y_{r, d, j, t-1}^{\textrm{E}}\right) \\
    \quad \forall z \in \mathbb{Z}, j \in \mathbb{J}, t \in \mathbb{T}
\end{aligned}\]</p><p>The change of the total number of full (empty) trucks in transit from zone <span>$z$</span> to zone <span>$z^{\prime}$</span> (on route <span>$r$</span> with direction <span>$d$</span>) should equal the number of full (empty) trucks that just departed from zone <span>$z$</span> minus the number of full (empty) trucks that just arrived at zone <span>$z^{\prime}$</span>:</p><p class="math-container">\[\begin{aligned}
    u_{r, d, j, t}^{\textrm{F}}-u_{r, d, j, t-1}^{\textrm{F}} &amp;= x_{r, d, j, t-1}^{\textrm{F}} - y_{r, d, j, t-1}^{\textrm{F}} \\
    u_{r, d, j, t}^{\textrm{E}}-u_{r, d, j, t-1}^{\textrm{E}} &amp;= x_{r, d, j, t-1}^{\textrm{E}} - y_{r, d, j, t-1}^{\textrm{E}} \\
    &amp; \quad \forall r \in \mathfrak{R}, d \in [-1,1], j \in \mathbb{J}, t \in \mathbb{T}
\end{aligned}\]</p><p>The amount of <span>$H_{2}$</span> delivered to zone <span>$z$</span> should equal the truck capacity times the number of discharged trucks minus the number of charged trucks, adjusted by the <span>$H_{2}$</span> boil-off loss during truck transportation and compression.</p><p class="math-container">\[\begin{aligned}
    h_{z, j, t}^{\textrm{H,TRU}}=\left[\left(1-\sigma_{j}\right) q_{z, j, t}^{\textrm{DIS}}-q_{z, j, t}^{\textrm{CHA}}\right] \overline{\textrm{E}}_{j}^{\textrm{H,TRU}} \\
    \quad \forall z \in \mathbb{Z}, j \in \mathbb{J}, t \in \mathbb{T}
\end{aligned}\]</p><p>Contributions to the hydrogen balance expression from gas trucking flows are defined as: HydrogenBalGas<em>{GEN} = \sum</em>{k \in \mathcal{UC}} x_{k,z,t}^{\textrm{H,GEN}}</p><p class="math-container">\[\begin{equation*}
	HydrogenBalGas_{TRU} = \sum_{j \in \mathcal{J}} x_{j,z,t}^{\textrm{H,TRU,Gas}} \quad \forall z \in \mathcal{Z}, t \in \mathcal{T}
\end{equation*}\]</p><p>Liquid hydrogen balance contributions are defined in a similar manner, for liquid trucks:</p><p class="math-container">\[\begin{equation*}
	HydrogenBalLiq_{TRU} = \sum_{j \in \mathcal{J}} x_{j,z,t}^{\textrm{H,TRU,Liq}}  \quad \forall z \in \mathcal{Z}, t \in \mathcal{T}
\end{equation*}\]</p><p>The minimum travelling time delay is modelled as follows.</p><p class="math-container">\[\begin{aligned}
    u_{r, d, j, t}^{\textrm{F}} \geq \sum_{e=t-\Delta_r+1}^{e=t} x_{r, d, j, e}^{\textrm{F}} \\
    u_{r, d, j, t}^{\textrm{E}} \geq \sum_{e=t-\Delta_r+1}^{e=t} x_{r, d, j, e}^{\textrm{E}} \quad \forall r \in \mathfrak{R}, d \in [-1,1], j \in \mathbb{J}, t \in \mathbb{T}
\end{aligned}\]</p><p class="math-container">\[\begin{aligned}
    u_{r, d, j, t}^{\textrm{F}} \geq \sum_{e=t+1}^{e=t+\Delta_{r}} y_{r, d, j, e}^{\textrm{F}} \\
    u_{r, d, j, t}^{\textrm{E}} \geq \sum_{e=t+1}^{e=t+\Delta_{r}} y_{r, d, j, e}^{\textrm{E}} \\
    \quad \forall r \in \mathfrak{R}, d \in [-1,1], j \in \mathbb{J}, t \in \mathbb{T}
\end{aligned}\]</p><p><strong>Constraints</strong></p><p>The charging capability of truck stations is limited by their compression or liquefaction capacity.</p><p class="math-container">\[\begin{equation*}
    q_{z, j, t}^{\textrm{CHA}} \overline{\textrm{E}}_{j}^{\textrm{H,TRU}} \leq H_{z, j}^{\textrm{H,TRU}} \quad \forall z \in \mathbb{Z}, j \in \mathbb{J}, t \in \mathbb{T}
\end{equation*}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/macroenergy/DOLPHYN/blob/51267f75d3085372bacd912e5d1017119098b379/src/HSC/model/truck/h2_truck_all.jl#L17-L134">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../h2_long_duration_truck/">« Hydrogen Long Duration Truck</a><a class="docs-footer-nextpage" href="../h2_truck_investment/">Hydrogen Truck Investment »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Monday 31 July 2023 11:40">Monday 31 July 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
